<div class="topbar">
  <div class="container">
    <div class="topbar__inner">
      <a class="brand" href="#">
        <span class="brand__logo"></span>
        <span>Auction<span style="color:var(--brand)">X</span></span>
      </a>

      <div class="search" role="search">
        <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="7"></circle>
          <path d="M20 20l-3.2-3.2"></path>
        </svg>
        <input placeholder="Search anything (cars, phones, brands...)" />
      </div>

      <span class="pill">Categories</span>

      <button class="btn btn--ghost" aria-label="notifications">
        <svg class="ico" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 8a6 6 0 0 1 12 0c0 7 3 7 3 7H3s3 0 3-7"></path>
          <path d="M10 21a2 2 0 0 0 4 0"></path>
        </svg>
      </button>
      <ng-container *ngIf="!auth.isAuth(); else authed">
        <button (click)="navigateToAuth()" class="btn btn--primary">Sign in</button>
      </ng-container>

      <ng-template #authed>
        <div class="">
          <!-- ✅ ეს არის ის “profile” ბლოკი, რომელზეც დაკლიკება გახსნის dropdown-ს -->
          <button class="btn btn--secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">

            <div class="avatar">
              <img src="https://i.pravatar.cc/25?img=13" alt="User">
            </div>

            <div class="name">{{ auth.user()?.email }}</div>


          </button>

          <!-- ✅ Dropdown menu -->
          <ul class="dropdown-menu dropdown-menu-end shadow">
            <li class="px-3 py-2">
              <div class="fw-semibold">{{ auth.user()?.email }}</div>
              <small class="text-muted">Role: {{ auth.user()?.role }}</small>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <a class="dropdown-item" routerLink="/profile">
                <i class="bi bi-person me-2"></i> Profile
              </a>
            </li>

            <li *ngIf="auth.user()?.role === 'Seller'">
              <a class="dropdown-item" routerLink="/sell">
                <i class="bi bi-plus-circle me-2"></i> Sell item
              </a>
            </li>

            <li>
              <a class="dropdown-item" routerLink="/my-auctions">
                <i class="bi bi-hammer me-2"></i> My auctions
              </a>
            </li>

            <li>
              <hr class="dropdown-divider">
            </li>

            <li>
              <button class="dropdown-item text-danger" type="button" (click)="logout()">
                <i class="bi bi-box-arrow-right me-2"></i> Logout
              </button>
            </li>
          </ul>
        </div>
      </ng-template>

    </div>

    <!-- Category chips (hidden on mobile) -->
    <div class="chips">
      <a class="chip active" href="#">All</a>
      <a class="chip" href="#">Live now</a>
      <a class="chip" href="#">Cars</a>
      <a class="chip" href="#">Electronics</a>
      <a class="chip" href="#">Fashion</a>
      <a class="chip" href="#">Real Estate</a>
      <a class="chip" href="#">Tools</a>
      <a class="chip" href="#">Collectibles</a>
    </div>
  </div>
</div>