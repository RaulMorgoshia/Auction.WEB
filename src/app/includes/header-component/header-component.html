<!-- ✅ Header -->
<header class="header">
  <div class="title">Dashboard</div>


 
  <div class="search">
    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2"
      style="opacity:.55">
      <circle cx="11" cy="11" r="7"></circle>
      <path d="M20 20l-3.2-3.2"></path>
    </svg>
    <input placeholder="Search anything items here" />
  </div>

  <button class="icon-btn" aria-label="notifications">
    <span class="dot"></span>
    <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M18 8a6 6 0 10-12 0c0 7-3 7-3 7h18s-3 0-3-7" />
      <path d="M13.7 21a2 2 0 0 1-3.4 0" />
    </svg>
  </button>


  <ng-container *ngIf="!auth.isAuth(); else authed">
    <div (click)="navigateToAuth()" class="profile btn">
      <div class="avatar">R</div>
      <div class="name">ავტორიზაცია</div>
      <svg class="caret" viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 9l6 6 6-6" />
      </svg>
    </div>

  </ng-container>
<ng-template #authed>
  <div class="dropdown">
    <!-- ✅ ეს არის ის “profile” ბლოკი, რომელზეც დაკლიკება გახსნის dropdown-ს -->
    <button
      class="profile dropdown-toggle"
      type="button"
      data-bs-toggle="dropdown"
      aria-expanded="false">

      <div class="avatar">
        <img src="https://i.pravatar.cc/40?img=13" alt="User">
      </div>

      <div class="name">{{ auth.user()?.email }}</div>

     
    </button>

    <!-- ✅ Dropdown menu -->
    <ul class="dropdown-menu dropdown-menu-end shadow">
      <li class="px-3 py-2">
        <div class="fw-semibold">{{ auth.user()?.email }}</div>
        <small class="text-muted">Role: {{ auth.user()?.role }}</small>
      </li>

      <li><hr class="dropdown-divider"></li>

      <li>
        <a class="dropdown-item" routerLink="/profile">
          <i class="bi bi-person me-2"></i> Profile
        </a>
      </li>

      <li *ngIf="auth.user()?.role === 'Seller'">
        <a class="dropdown-item" routerLink="/sell">
          <i class="bi bi-plus-circle me-2"></i> Sell item
        </a>
      </li>

      <li>
        <a class="dropdown-item" routerLink="/my-auctions">
          <i class="bi bi-hammer me-2"></i> My auctions
        </a>
      </li>

      <li><hr class="dropdown-divider"></li>

      <li>
        <button class="dropdown-item text-danger" type="button" (click)="logout()">
          <i class="bi bi-box-arrow-right me-2"></i> Logout
        </button>
      </li>
    </ul>
  </div>
</ng-template>

</header>